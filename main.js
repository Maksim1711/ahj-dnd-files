!function(){"use strict";const e=new class{constructor(e){this.boards=e,this.columns=e.querySelectorAll(".boards__list"),this.add=e.querySelectorAll(".boards__add"),this.tasks=[["Lorem ipsum dolor sit amet consectetur, adipisicing elit. Laboriosam, aliquam.","Lorem ipsum dolor sit, amet consectetur adipisicing elit. Non nam aut quisquam ipsam illum odio!","Lorem ipsum dolor sit.","Lorem ipsum dolor sit, amet consectetur adipisicing elit. Adipisci ab rerum dicta","Lorem ipsum dolor sit amet consectetur."],["Lorem ipsum dolor sit amet consectetur adipisicing elit.","Lorem ipsum dolor sit amet consectetur adipisicing elit. Quam.","Lorem ipsum dolor sit, amet consectetur adipisicing elit. Architecto, natus eaque?","Lorem ipsum dolor sit amet consectetur."],["Welcome to Trello","Thid is a card"]],this.addItem=this.addItem.bind(this),this.addItemSubmit=this.addItemSubmit.bind(this),this.addItemClose=this.addItemClose.bind(this),this.closeItemMouseOver=this.closeItemMouseOver.bind(this),this.closeItemMouseOut=this.closeItemMouseOut.bind(this),this.closeItem=this.closeItem.bind(this),this.loadTasks=this.loadTasks.bind(this),this.saveTasks=this.saveTasks.bind(this),this.dragStart=this.dragStart.bind(this),this.dragMove=this.dragMove.bind(this),this.dragFinish=this.dragFinish.bind(this),this.dragTakePlace=this.dragTakePlace.bind(this),this.dragPlaceRemove=this.dragPlaceRemove.bind(this)}init(){document.addEventListener("DOMContentLoaded",this.loadTasks),window.addEventListener("beforeunload",this.saveTasks),this.render(),[...this.add].forEach((e=>{e.addEventListener("click",this.addItem)})),[...this.columns].forEach((e=>{e.addEventListener("mouseover",this.closeItemMouseOver)})),[...this.columns].forEach((e=>{e.addEventListener("mouseout",this.closeItemMouseOut)})),[...this.columns].forEach((e=>{e.addEventListener("mousedown",this.dragStart)}))}render(){for(const e of this.columns)e.innerHTML="";if(this.tasks.length)for(let e=0;e<this.columns.length;e+=1)this.tasks[e].forEach((t=>{const s=document.createElement("li");s.classList.add("boards__item"),s.innerText=t,this.columns[e].append(s)}))}addItem(e){const t=document.createElement("form");t.classList.add("boards__add_form"),t.innerHTML='\n\t  <textarea class="boards__add_textarea" placeholder="Inter a title for this card..."></textarea>\n\t  <div class="boards__add_controls">\n\t\t <button class="boards__add_button">Add card</button>\n\t\t <div class="boards__add_close">âœ•</div>\n\t  </div>',e.target.replaceWith(t),t.addEventListener("submit",this.addItemSubmit),t.querySelector(".boards__add_close").addEventListener("click",this.addItemClose)}addItemSubmit(e){e.preventDefault();const t=e.target.querySelector(".boards__add_textarea");if(t.value){const s=e.target.parentElement.querySelector(".boards__list"),i=[...this.columns].findIndex((e=>e===s));this.tasks[i].push(t.value),this.render(),e.target.replaceWith(this.add[i])}else{const e=document.createElement("div");e.classList.add("boards__add_error"),e.innerText="You didn't write anything",t.after(e),e.style.top=t.offsetTop+t.offsetHeight-e.offsetHeight+"px",setTimeout((()=>e.remove()),2e3)}}addItemClose(e){const t=e.target.closest(".boards__column").querySelector(".boards__list"),s=[...this.columns].findIndex((e=>e===t));e.target.closest(".boards__add_form").replaceWith(this.add[s])}closeItemMouseOver(e){if(!e.target.classList.contains("boards__item"))return;if(e.relatedTarget&&e.relatedTarget.parentNode===e.target)return;if(this.draggedElement)return;const t=document.createElement("div");t.classList.add("boards__close"),e.target.append(t);const s=e.target.getBoundingClientRect();t.style.top=`${window.scrollY+s.top}px`,t.style.left=window.scrollX+s.left+e.target.offsetWidth-t.offsetWidth+"px",t.addEventListener("click",this.closeItem)}closeItemMouseOut(e){if(e.relatedTarget.parentNode===e.target)return;const t=e.target.querySelector(".boards__close"),s=e.target.parentNode.querySelector(".boards__close");t?t.remove():s&&s.remove()}closeItem(e){const t=e.target.closest(".boards__item").innerText,s=e.target.closest(".boards__column").querySelector(".boards__list"),i=[...this.columns].findIndex((e=>e===s)),a=this.tasks[i].findIndex((e=>e===t));this.tasks[i].splice(a,1),this.render()}loadTasks(){const e=localStorage.getItem("boards");e&&(this.tasks=JSON.parse(e)),this.render()}saveTasks(){localStorage.setItem("boards",JSON.stringify(this.tasks))}dragStart(e){e.target.classList.contains("boards__item")&&1===e.which&&(this.targetElement=e.target,this.draggedElement=this.targetElement.cloneNode(!0),this.draggedElement.classList.add("boards__dragged"),this.draggedElement.querySelector(".boards__close").remove(),document.body.append(this.draggedElement),this.draggedX=e.pageX-this.targetElement.getBoundingClientRect().x,this.draggedY=e.pageY-this.targetElement.getBoundingClientRect().y,this.draggedElement.style.width=`${this.targetElement.offsetWidth}px`,this.draggedElement.style.height=`${this.targetElement.offsetHeight}px`,this.draggedElement.style.left=e.pageX-this.draggedX-5+"px",this.draggedElement.style.top=e.pageY-this.draggedY-5+"px",this.targetElement.style.display="none",document.addEventListener("mousemove",this.dragMove),[...this.columns].forEach((e=>{e.addEventListener("mousemove",this.dragTakePlace)})),[...this.columns].forEach((e=>{e.addEventListener("mouseleave",this.dragPlaceRemove)})),document.addEventListener("mouseup",this.dragFinish))}dragMove(e){e.preventDefault(),this.draggedElement&&(this.draggedElement.style.left=e.pageX-this.draggedX-5+"px",this.draggedElement.style.top=e.pageY-this.draggedY-5+"px")}dragTakePlace(e){if(!this.draggedElement)return;const t=e.target.closest(".boards__list"),s=t.querySelectorAll(".boards__item"),i=[t.getBoundingClientRect().top];for(const e of s)i.push(e.getBoundingClientRect().top+e.offsetHeight/2);this.targetPlace||(this.targetPlace=document.createElement("div"),this.targetPlace.classList.add("boards__targetplace"),this.targetPlace.style.width=`${this.draggedElement.offsetWidth}px`,this.targetPlace.style.height=`${this.draggedElement.offsetHeight}px`);const a=i.findIndex((t=>t>e.pageY));-1!==a?s[a-1].before(this.targetPlace):t.append(this.targetPlace)}dragPlaceRemove(){this.draggedElement&&this.targetPlace&&(this.targetPlace.remove(),this.targetPlace=null)}dragFinish(e){this.draggedElement&&(e.target.closest(".boards__list")?(this.targetPlace.replaceWith(this.targetElement),this.dragClean(),this.tasksCollect()):this.dragClean())}dragClean(){this.targetElement.style.display="list-item",this.draggedElement.remove(),this.draggedElement=null,this.draggedX=null,this.draggedY=null,this.targetPlace=null,document.removeEventListener("mousemove",this.dragMove),[...this.columns].forEach((e=>{e.removeEventListener("mousemove",this.dragTakePlace)})),[...this.columns].forEach((e=>{e.removeEventListener("mouseleave",this.dragPlaceRemove)})),document.removeEventListener("mouseup",this.dragFinish)}tasksCollect(){this.tasks=[[],[],[]];for(let e=0;e<this.columns.length;e+=1){const t=this.columns[e].querySelectorAll(".boards__item");for(const s of t)this.tasks[e].push(s.innerText)}}}(document.querySelector(".boards"));e.init(),e.tasks=[["Lorem ipsum dolor sit amet consectetur, adipisicing elit. Laboriosam, aliquam.","Lorem ipsum dolor sit, amet consectetur adipisicing elit. Non nam aut quisquam ipsam illum odio!","Lorem ipsum dolor sit.","Lorem ipsum dolor sit, amet consectetur adipisicing elit. Adipisci ab rerum dicta","Lorem ipsum dolor sit amet consectetur."],["Lorem ipsum dolor sit amet consectetur adipisicing elit.","Lorem ipsum dolor sit amet consectetur adipisicing elit. Quam.","Lorem ipsum dolor sit, amet consectetur adipisicing elit. Architecto, natus eaque?","Lorem ipsum dolor sit amet consectetur."],["Welcome to Trello","Thid is a card"]],e.render()}();
//# sourceMappingURL=main.js.map